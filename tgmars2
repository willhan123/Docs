<mxfile host="app.diagrams.net" modified="2021-10-29T06:55:20.024Z" agent="5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.77 Safari/537.36" etag="C3van0G4u4sDUCLVN5bc" version="15.5.5" type="github">
  <diagram id="2gt1XU39aFN9RMX-U9aE" name="Page-1">
    <mxGraphModel dx="1422" dy="882" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="ooi4nAkgXaJhPbzVWCE_-34" value="tgspark直接调度在tgstoarge节点上" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=#FFFFFF;fontSize=12;fontColor=none;" vertex="1" parent="1">
          <mxGeometry x="400" y="900" width="116" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ooi4nAkgXaJhPbzVWCE_-30" value="&lt;font style=&quot;font-size: 12px&quot;&gt;分别获取tgstorage数据与packagespliter数据，进行join&lt;br&gt;&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=#FFFFFF;fontSize=16;fontColor=none;" vertex="1" parent="1">
          <mxGeometry x="420" y="820" width="170" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ooi4nAkgXaJhPbzVWCE_-27" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=16;fontColor=none;dashed=1;" edge="1" parent="1" source="ooi4nAkgXaJhPbzVWCE_-21" target="ooi4nAkgXaJhPbzVWCE_-6">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ooi4nAkgXaJhPbzVWCE_-21" value="" style="rounded=0;whiteSpace=wrap;html=1;labelBackgroundColor=#FFFFFF;fontSize=16;fontColor=none;fillColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="180" y="730" width="470" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ooi4nAkgXaJhPbzVWCE_-15" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=16;fontColor=#000000;" edge="1" parent="1" source="ooi4nAkgXaJhPbzVWCE_-1" target="ooi4nAkgXaJhPbzVWCE_-10">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ooi4nAkgXaJhPbzVWCE_-1" value="&lt;font style=&quot;font-size: 16px&quot;&gt;调度层&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="190" y="400" width="440" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ooi4nAkgXaJhPbzVWCE_-47" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#000000;" edge="1" parent="1" source="ooi4nAkgXaJhPbzVWCE_-3" target="ooi4nAkgXaJhPbzVWCE_-41">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="270" y="980" />
              <mxPoint x="270" y="980" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="ooi4nAkgXaJhPbzVWCE_-50" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#000000;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="319" y="954" as="sourcePoint" />
            <mxPoint x="319" y="1000" as="targetPoint" />
            <Array as="points">
              <mxPoint x="319" y="990" />
              <mxPoint x="319" y="990" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="ooi4nAkgXaJhPbzVWCE_-51" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#000000;" edge="1" parent="1" source="ooi4nAkgXaJhPbzVWCE_-3" target="ooi4nAkgXaJhPbzVWCE_-41">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ooi4nAkgXaJhPbzVWCE_-3" value="&lt;code style=&quot;padding: 0.1em; margin: 0px; border-radius: 0.3em; font-size: 14px; text-align: left;&quot;&gt;tgstorage data_node&lt;/code&gt;&lt;span style=&quot;font-family: &amp;quot;helvetica neue&amp;quot;, arial, &amp;quot;hiragino sans gb&amp;quot;, stheiti, &amp;quot;microsoft yahei&amp;quot;, &amp;quot;wenquanyi micro hei&amp;quot;, sans-serif; font-size: 14px; text-align: left;&quot;&gt;&amp;nbsp;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontColor=#000000;labelBackgroundColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="196" y="914" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ooi4nAkgXaJhPbzVWCE_-5" value="&lt;span style=&quot;font-family: monospace; font-size: 14px; text-align: left;&quot;&gt;tgmars-local-runner-service&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontColor=#000000;labelBackgroundColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="196" y="874" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ooi4nAkgXaJhPbzVWCE_-6" value="&lt;span style=&quot;font-family: monospace; font-size: 14px; text-align: left;&quot;&gt;localrunner.OpenServiceRpc&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontColor=#000000;labelBackgroundColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="196" y="834" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ooi4nAkgXaJhPbzVWCE_-8" value="&lt;code style=&quot;padding: 0.1em; margin: 0px; border-radius: 0.3em; font-size: 14px; text-align: left;&quot;&gt;livy_server&lt;/code&gt;&lt;span style=&quot;font-family: &amp;quot;helvetica neue&amp;quot;, arial, &amp;quot;hiragino sans gb&amp;quot;, stheiti, &amp;quot;microsoft yahei&amp;quot;, &amp;quot;wenquanyi micro hei&amp;quot;, sans-serif; font-size: 14px; text-align: left;&quot;&gt;&amp;nbsp;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontColor=#000000;labelBackgroundColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="191" y="640" width="179" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ooi4nAkgXaJhPbzVWCE_-19" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=16;fontColor=#000000;" edge="1" parent="1" source="ooi4nAkgXaJhPbzVWCE_-9" target="ooi4nAkgXaJhPbzVWCE_-11">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ooi4nAkgXaJhPbzVWCE_-9" value="&lt;code style=&quot;padding: 0.1em; margin: 0px; border-radius: 0.3em; font-size: 14px; text-align: left;&quot;&gt;tgmars-sql-runner&lt;/code&gt;&lt;span style=&quot;font-family: &amp;quot;helvetica neue&amp;quot;, arial, &amp;quot;hiragino sans gb&amp;quot;, stheiti, &amp;quot;microsoft yahei&amp;quot;, &amp;quot;wenquanyi micro hei&amp;quot;, sans-serif; font-size: 14px; text-align: left;&quot;&gt;&amp;nbsp;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontColor=#000000;labelBackgroundColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="467" y="540" width="163" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ooi4nAkgXaJhPbzVWCE_-18" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=16;fontColor=#000000;" edge="1" parent="1" source="ooi4nAkgXaJhPbzVWCE_-10" target="ooi4nAkgXaJhPbzVWCE_-8">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ooi4nAkgXaJhPbzVWCE_-10" value="&lt;span style=&quot;font-family: monospace ; font-size: 14px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-align: left ; text-indent: 0px ; text-transform: none ; word-spacing: 0px ; display: inline ; float: none&quot;&gt;tgmars-spark-controller&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontColor=#000000;labelBackgroundColor=#FFFFFF;fillColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="190" y="540" width="181" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ooi4nAkgXaJhPbzVWCE_-11" value="&lt;span style=&quot;&quot;&gt;&lt;code style=&quot;padding: 0.1em ; margin: 0px ; border-radius: 0.3em ; font-size: 14px ; text-align: left&quot;&gt;tgmars_thrift_server&lt;/code&gt;&lt;span style=&quot;font-family: &amp;quot;helvetica neue&amp;quot; , &amp;quot;arial&amp;quot; , &amp;quot;hiragino sans gb&amp;quot; , &amp;quot;stheiti&amp;quot; , &amp;quot;microsoft yahei&amp;quot; , &amp;quot;wenquanyi micro hei&amp;quot; , sans-serif ; font-size: 14px ; text-align: left&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontColor=#000000;labelBackgroundColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="465" y="640" width="167" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ooi4nAkgXaJhPbzVWCE_-12" value="&lt;span style=&quot;font-family: monospace ; font-size: 14px ; text-align: left ; background-color: rgb(255 , 255 , 255)&quot;&gt;TGMarsSparkDataSourceV3&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontColor=#000000;labelBackgroundColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="200" y="740" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ooi4nAkgXaJhPbzVWCE_-14" value="&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;&lt;code style=&quot;padding: 0.1em ; margin: 0px ; border-radius: 0.3em ; font-size: 14px ; text-align: left&quot;&gt;PackageSpliterRpc&lt;/code&gt;&lt;span style=&quot;font-family: &amp;#34;helvetica neue&amp;#34; , &amp;#34;arial&amp;#34; , &amp;#34;hiragino sans gb&amp;#34; , &amp;#34;stheiti&amp;#34; , &amp;#34;microsoft yahei&amp;#34; , &amp;#34;wenquanyi micro hei&amp;#34; , sans-serif ; font-size: 14px ; text-align: left&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontColor=#000000;labelBackgroundColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="500" y="860" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ooi4nAkgXaJhPbzVWCE_-17" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=16;fontColor=#000000;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="ooi4nAkgXaJhPbzVWCE_-1" target="ooi4nAkgXaJhPbzVWCE_-9">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="420" y="470" as="sourcePoint" />
            <mxPoint x="290.5" y="550" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ooi4nAkgXaJhPbzVWCE_-20" value="&lt;span style=&quot;font-family: monospace ; font-size: 14px ; text-align: left ; background-color: rgb(255 , 255 , 255)&quot;&gt;TGMarsSparkDataSourceV3&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontColor=#000000;labelBackgroundColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="420" y="740" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ooi4nAkgXaJhPbzVWCE_-22" value="业务http请求" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=#FFFFFF;fontSize=16;fontColor=none;" vertex="1" parent="1">
          <mxGeometry x="240" y="470" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ooi4nAkgXaJhPbzVWCE_-23" value="http 测试sql" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=#FFFFFF;fontSize=16;fontColor=none;" vertex="1" parent="1">
          <mxGeometry x="450" y="470" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ooi4nAkgXaJhPbzVWCE_-24" value="http" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=#FFFFFF;fontSize=16;fontColor=none;" vertex="1" parent="1">
          <mxGeometry x="280" y="600" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ooi4nAkgXaJhPbzVWCE_-25" value="sql请求" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=#FFFFFF;fontSize=16;fontColor=none;" vertex="1" parent="1">
          <mxGeometry x="570" y="600" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ooi4nAkgXaJhPbzVWCE_-28" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=16;fontColor=none;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="ooi4nAkgXaJhPbzVWCE_-21" target="ooi4nAkgXaJhPbzVWCE_-3">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="425" y="800" as="sourcePoint" />
            <mxPoint x="290" y="960" as="targetPoint" />
            <Array as="points">
              <mxPoint x="420" y="790" />
              <mxPoint x="420" y="934" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="ooi4nAkgXaJhPbzVWCE_-32" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=16;fontColor=none;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="ooi4nAkgXaJhPbzVWCE_-21" target="ooi4nAkgXaJhPbzVWCE_-14">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="460" y="800" as="sourcePoint" />
            <mxPoint x="300" y="960" as="targetPoint" />
            <Array as="points">
              <mxPoint x="460" y="800" />
              <mxPoint x="600" y="800" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="ooi4nAkgXaJhPbzVWCE_-33" value="如果无法在tgstorage上调度tgspark，则走rpc" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=#FFFFFF;fontSize=12;fontColor=none;" vertex="1" parent="1">
          <mxGeometry x="140" y="800" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ooi4nAkgXaJhPbzVWCE_-36" value="" style="endArrow=classic;html=1;rounded=0;fontSize=12;fontColor=none;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.214;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="ooi4nAkgXaJhPbzVWCE_-8" target="ooi4nAkgXaJhPbzVWCE_-21">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="390" y="730" as="sourcePoint" />
            <mxPoint x="440" y="680" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ooi4nAkgXaJhPbzVWCE_-37" value="" style="endArrow=classic;html=1;rounded=0;fontSize=12;fontColor=none;exitX=0.545;exitY=1.05;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.8;entryY=-0.017;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="ooi4nAkgXaJhPbzVWCE_-11" target="ooi4nAkgXaJhPbzVWCE_-21">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="290.5" y="690" as="sourcePoint" />
            <mxPoint x="290.5799999999999" y="740" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ooi4nAkgXaJhPbzVWCE_-38" value="用spark-submit运行tgmars app的jar" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=#FFFFFF;fontSize=12;fontColor=none;" vertex="1" parent="1">
          <mxGeometry x="290" y="690" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ooi4nAkgXaJhPbzVWCE_-39" value="运行sparksql" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=#FFFFFF;fontSize=12;fontColor=none;" vertex="1" parent="1">
          <mxGeometry x="568" y="690" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ooi4nAkgXaJhPbzVWCE_-41" value="&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;&lt;code style=&quot;padding: 0.1em ; margin: 0px ; border-radius: 0.3em ; font-size: 14px ; text-align: left&quot;&gt;over_lord&lt;/code&gt;&lt;span style=&quot;font-family: &amp;#34;helvetica neue&amp;#34; , &amp;#34;arial&amp;#34; , &amp;#34;hiragino sans gb&amp;#34; , &amp;#34;stheiti&amp;#34; , &amp;#34;microsoft yahei&amp;#34; , &amp;#34;wenquanyi micro hei&amp;#34; , sans-serif ; font-size: 14px ; text-align: left&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;labelBackgroundColor=#FFFFFF;fontSize=12;fontColor=none;fillColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="196" y="1000" width="200" height="50" as="geometry" />
        </mxCell>
        <mxCell id="ooi4nAkgXaJhPbzVWCE_-42" value="&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;&lt;code style=&quot;padding: 0.1em ; margin: 0px ; border-radius: 0.3em ; font-size: 14px ; text-align: left&quot;&gt;consul&lt;br&gt;&lt;/code&gt;&lt;span style=&quot;font-family: &amp;#34;helvetica neue&amp;#34; , &amp;#34;arial&amp;#34; , &amp;#34;hiragino sans gb&amp;#34; , &amp;#34;stheiti&amp;#34; , &amp;#34;microsoft yahei&amp;#34; , &amp;#34;wenquanyi micro hei&amp;#34; , sans-serif ; font-size: 14px ; text-align: left&quot;&gt;&amp;nbsp;&lt;br&gt;服务&lt;br&gt;发现，管理&lt;br&gt;右侧&lt;br&gt;全部&lt;br&gt;服务&lt;br&gt;&lt;/span&gt;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;labelBackgroundColor=#FFFFFF;fontSize=12;fontColor=none;fillColor=#FFFFFF;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="50" y="540" width="50" height="420" as="geometry" />
        </mxCell>
        <mxCell id="ooi4nAkgXaJhPbzVWCE_-43" value="yarn&lt;br&gt;&lt;br&gt;管理&lt;br&gt;spark&lt;br&gt;资源&lt;br&gt;调度" style="rounded=0;whiteSpace=wrap;html=1;labelBackgroundColor=#FFFFFF;fontSize=12;fontColor=none;fillColor=#FFFFFF;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="740" y="540" width="60" height="420" as="geometry" />
        </mxCell>
        <mxCell id="ooi4nAkgXaJhPbzVWCE_-52" value="多个tgstoarge节点，维护同一套元数据" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;dashed=1;labelBackgroundColor=#FFFFFF;fontSize=12;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="331" y="962" width="124" height="30" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
